.PHONY: all clean distclean install uninstall

include ../Make.incl

SCRIPTS=chkparser
BINFILES=chklref
TEXFILES=chklref.sty


all: 

install: all
	if ! test -d $(DESTDIR)$(bindir); then $(INSTALL) -d $(DESTDIR)$(bindir); fi
	$(INSTALL) -m 755 $(BINFILES) $(DESTDIR)$(bindir)
	if ! test -d $(DESTDIR)$(SCRIPTSDIR); then $(INSTALL) -d $(DESTDIR)$(SCRIPTSDIR); fi
	$(INSTALL) -m 755 $(SCRIPTS) $(DESTDIR)$(SCRIPTSDIR)
	if ! test -d $(DESTDIR)$(LATEXDIR); then $(INSTALL) -d $(DESTDIR)$(LATEXDIR); fi
	$(INSTALL) -m 644 $(TEXFILES) $(DESTDIR)$(LATEXDIR)


define chk_rm
@for f in $(2); do echo "uninstalling $(1)/$$f"; $(RM) $(1)/$$f; done
endef

uninstall:
	$(call chk_rm, $(bindir), $(DESTDIR)$(BINFILES))
	$(call chk_rm, $(LATEXDIR), $(DESTDIR)$(TEXFILES))
	$(call chk_rm, $(SCRIPTSDIR), $(DESTDIR)$(SCRIPTS))


distclean:
	$(RM) chklref

